STOCKAGE ET IMAGES - RÉSOLUTION DES PROBLÈMES

1. CRÉATION DU LIEN SYMBOLIQUE (storage:link)

Pour que les images des produits s'affichent correctement, vous devez créer un lien symbolique entre le dossier de stockage et le dossier public.

Veuillez exécuter la commande suivante dans votre terminal à la racine du projet :

php artisan storage:link

Cette commande créera un lien symbolique de public/storage vers storage/app/public, permettant aux fichiers uploadés d'être accessibles via le web.

Si le lien existe déjà et que vous rencontrez des problèmes, vous pouvez le supprimer et le recréer :

1. Supprimez le lien existant (s'il existe) :
   - Sur Linux/Mac : rm public/storage
   - Sur Windows : rmdir public/storage

2. Recréez le lien :
   php artisan storage:link

2. PERMISSIONS DES DOSSIERS DE STOCKAGE

Assurez-vous que les dossiers de stockage ont les bonnes permissions :

- storage/app/public/ : doit être accessible en lecture/écriture
- public/storage : doit être accessible en lecture (via le lien symbolique)

3. GESTION DES IMAGES AVEC CARACTÈRES SPÉCIAUX

Les noms de fichiers contenant des caractères spéciaux peuvent causer des problèmes. Notre système maintenant nettoie automatiquement les noms de fichiers en remplaçant les caractères spéciaux par des underscores (_) pour éviter ces problèmes.

4. STRUCTURE DE BASE DE DONNÉES CORRECTE

Les chemins d'images dans la base de données doivent être stockés au format :
- products/nom_du_fichier.jpg (pour les fichiers dans le sous-dossier products/)

5. GESTION DES ERREURS D'ACCESSEUR

L'accessor getImageAttribute() dans le modèle Produit vérifie maintenant si le fichier existe physiquement avant de générer l'URL. S'il n'existe pas, il retourne une image de substitution.

6. VÉRIFICATION POST-INSTALLATION

Après avoir exécuté php artisan storage:link, vous pouvez vérifier si le lien fonctionne en accédant à une image via votre navigateur :
http://votre-domaine.local/storage/products/votre-image.jpg

Si l'image s'affiche correctement, le lien fonctionne. Sinon, vérifiez que la commande storage:link a été exécutée avec succès.